<div id="gs-group-messages-posts-ajax-response"
  tal:define="munge_date python:modules['Products.XWFCore.XWFUtils'].munge_date;">
  <table id="gs-group-messages-posts-ajax-response">
    <thead>
      <tr>
        <th class="author">Author</th>
        <th class="topic">Topic</th>
        <th class="files">Files</th>
        <th class="date">Date</th>
      </tr>
    </thead>
    <tbody>
      <tal:block repeat="post view/posts">
        <tr tal:define="n repeat/post/number;
          oe python:(n%2 and 'odd') or 'even';
          class string:post ${oe}"
          tal:attributes="id string:post-${post/post_id};
            class string:post-summary ${class};">
          <td class="topic">
            <a tal:condition="post/subject"
              tal:attributes="href string:/r/post/${post/post_id}"
              tal:content="python:post['subject'][:50]">A Topic</a>
          </td>
          <td class="author">
            <a tal:omit-tag="not:post/author/exists" class="name"
              tal:attributes="href post/author/url;
              title string:Profile of ${post/author/name};"
              tal:content="post/author/name">Me!</a>
          </td>
          <td class="files">
            <tal:block tal:repeat="file post/files">
              <a href="#" title="foo"
                tal:define="icon python:file['mime_type'].replace('/','-').replace('.','-')"
                tal:attributes="title file/file_name;
                  href string:/r/post/${post/post_id};
                  class string:fileIcon ${icon}">&#160;</a>
            </tal:block>
          </td>
          <td class="date" 
            tal:define="ctx view/context; d post/date"
            tal:content="python:munge_date(ctx, d)">
            Today, Tomorrow, Timaru
          </td>
        </tr>
      </tal:block>
    </tbody>
  </table>
</div><!--gs-group-messages-posts-ajax-response-->

