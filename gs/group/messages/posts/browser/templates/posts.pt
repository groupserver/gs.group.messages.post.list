<html xmlns="http://www.w3.org/1999/xhtml"
  xmlns:metal="http://xml.zope.org/namespaces/metal"
  xmlns:tal="http://xml.zope.org/namespaces/tal"
  metal:use-macro="context/@@groupserver_layout/page">
  <head>
        <title metal:fill-slot="title">
          Posts in <span tal:replace="view/groupInfo/name"/>:
          <span tal:replace="view/siteInfo/name"/>
        </title>
    
    <tal:block metal:fill-slot="metadata" 
      tal:define="global postURLPrefix string:p/;
      global topicURLPrefix string:t/;
      global earlierURL view/get_earlier_url;
      global laterURL view/get_later_url;
      global lastChunkURL view/get_last_url">

      <link rel="first" href="posts.html" title="Most recent posts"
        tal:condition="laterURL" />
      <link rel="previous" href="#" title="Later posts"
        tal:condition="laterURL"
        tal:attributes="href laterURL" />
      <link rel="next" href="#" title="Earlier posts"
        tal:condition="earlierURL"
        tal:attributes="href earlierURL" />
      <link rel="last" title="The oldest posts"
        tal:condition="earlierURL"
        tal:attributes="href lastChunkURL" />
      <link rel="up" href="#"
        tal:attributes="title view/groupInfo/name;
        href string:${view/groupInfo/relativeURL}/" />
      <link rel="alternate" title="ATOM Feed" type="application/atom+xml"
        href="#" 
        tal:attributes="title string:Posts in ${view/groupInfo/name};
        href view/web_feed_uri" />
    </tal:block>
  </head>
  
  <body>
    <ul metal:fill-slot="breadcrumb">
      <li><a tal:attributes="title string:${view/siteInfo/name} Homepage"
             href="/" title="Home">&#8962;</a></li>
      <li>
        <a tal:attributes="href string:${view/groupInfo/relativeURL}/">
          <strong class="group" 
                  tal:content="view/groupInfo/name">This group</strong>
        </a>
      </li>
      <li>Posts</li>
    </ul>
    <div metal:fill-slot="body" role="main" id="gs-group-messages-posts-page"
         tal:define="postList view/posts;
                     post_count python:len(postList)">
      <div class="btn-group nav" role="navigation" 
           tal:define="len view/chunkLength">
        <a href="#" tal:condition="laterURL" class="prev btn"
           tal:attributes="href laterURL;
                           title string:The ${len} more recent posts;">Prev</a>
        <span tal:condition="not:laterURL" class="prev btn disabled">Prev</span>
        <a class="group up btn"
           tal:attributes="title string:Group: ${view/groupInfo/name};
                           href string:${view/groupInfo/relativeURL}/;"
           href="#">Up</a>
        <a href="#" tal:condition="earlierURL" class="next btn"
           tal:attributes="href earlierURL;
                           title string:The ${len} older posts;">Next</a>
        <span tal:condition="not:earlierURL" 
              class="next btn disabled">Earlier</span>
      </div>
      <h1>Posts in
      <span class="group"
            tal:content="view/groupInfo/name"/></h1>
      <div class="postList hatom"
        tal:condition="python:post_count > 0">
        <tal:block repeat="post postList">
          <p tal:define="position repeat/post/number; 
            topicName post/subject;
            isPublic view/isPublic;
            rptAuth python:postList[position-1]['author_id'] == postList[position-2]['author_id'];
      showPhoto python:(position==1) or not(rptAuth);"
            tal:replace="structure provider:groupserver.Post">
            The email message is rendered by the Post content provider,
            not by this page.
          </p>
        </tal:block>
      </div><!--postList-->
      <div class="btn-group nav" role="navigation" 
           tal:define="len view/chunkLength">
        <a href="#" tal:condition="laterURL" class="prev btn"
           tal:attributes="href laterURL;
                           title string:The ${len} more recent posts;">Prev</a>
        <span tal:condition="not:laterURL" class="prev btn disabled">Prev</span>
        <a class="group up btn"
           tal:attributes="title string:Group: ${view/groupInfo/name};
                           href string:${view/groupInfo/relativeURL}/;"
           href="#">Up</a>
        <a href="#" tal:condition="earlierURL" class="next btn"
           tal:attributes="href earlierURL;
                           title string:The ${len} older posts;">Next</a>
        <span tal:condition="not:earlierURL" 
              class="next btn disabled">Earlier</span>
      </div><!--navigation-->
      <p tal:condition="python:post_count == 0">
        There are no posts in this group.
      </p>
    </div><!--hatom-->
    <script metal:fill-slot="javascript" type="text/javascript" 
            src="/++resource++gs-group-messages-post-share-min-20130114.js"
            defer="true">&#160;</script>
  </body>
</html>
