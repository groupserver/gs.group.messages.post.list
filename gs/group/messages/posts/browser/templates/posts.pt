<html xmlns="http://www.w3.org/1999/xhtml"
  xmlns:metal="http://xml.zope.org/namespaces/metal"
  xmlns:tal="http://xml.zope.org/namespaces/tal"
  metal:use-macro="context/@@groupserver_layout/page">
  <head>

    <!--Todo: add the division name.-->
  	<title metal:fill-slot="title">
      Latest posts in
      <span tal:replace="view/groupInfo/name"/>:
      <span tal:replace="view/siteInfo/name"/>
    </title>
    
    <meta name="title" content="Lastest Posts Template"/>
    <meta name="author" content="Michael JasonSmith" />
    <meta name="description" 
      content="This template is used to render the list of latest posts" />
    <meta name="date" content="2006-10-25"/>
    
    <tal:block metal:fill-slot="metadata" 
      tal:define="global postURLPrefix string:p/;
      global topicURLPrefix string:t/;
      global earlierURL view/get_earlier_url;
      global laterURL view/get_later_url;
      global lastChunkURL view/get_last_url">

      <link rel="first" href="posts.html" title="Most recent posts"
        tal:condition="laterURL" />
      <link rel="previous" href="#" title="Later posts"
        tal:condition="laterURL"
        tal:attributes="href laterURL" />
      <link rel="next" href="#" title="Earlier posts"
        tal:condition="earlierURL"
        tal:attributes="href earlierURL" />
      <link rel="last" title="The oldest posts"
        tal:condition="earlierURL"
        tal:attributes="href lastChunkURL" />
      
      <link rel="up" href="#"
        tal:attributes="title view/groupInfo/name;
        href view/groupInfo/url" />
      
      <link rel="alternate" title="ATOM Feed" type="application/atom+xml"
        href="#" 
        tal:attributes="title string:ATOM Feed of the Latest Posts to ${view/groupInfo/name};
        href view/web_feed_uri" />
      
      <!-- The documents related to this post -->
      <link rel="bookmark" title="Group Homepage" href="#"
        tal:attributes="title string:${view/groupInfo/name} Homepage';
        href string:view/groupInfo/url" />
      <link rel="home" 
        tal:attributes="title string:${view/siteInfo/name} Homepage'"
        href="/" />
      <link rel="help" 
        tal:attributes="title string:${view/siteInfo/name} Help"
        href="/help" />
    </tal:block>
  </head>
  
  <body>
    <div class="hatom" metal:fill-slot="body"
         tal:define="postList view/get_posts;
                     post_count python:len(postList)">
      <h1>Posts in
        <span class="group"
          tal:content="view/groupInfo/name"/></h1>
      <tal:block tal:define="len view/get_chunk_length">
        <ul class="inline-list navlinks">
          <li>
            <a href="#" tal:condition="laterURL" class="prev"
              tal:attributes="href laterURL;
              title string:The ${len} more recent posts;">Later 
              <span tal:replace="len">-1</span> posts</a>
            <span tal:condition="not:laterURL" class="prev">Later
              <span tal:replace="len">-1</span> posts
            </span>
          </li>
          <li>
            <a href="#" tal:condition="earlierURL" class="next"
              tal:attributes="href earlierURL;
              title string:The ${len} older posts;">Earlier
              <span tal:replace="len">-1</span> posts</a>
            <span tal:condition="not:earlierURL" class="next">Earlier
              <span tal:replace="len">-1</span> posts
            </span>
          </li>
        </ul>
      </tal:block>
      <ul class="inline-list">
        <li class="topics">
          <a href="topics.html">Topics in
            <tal:block
              content="view/groupInfo/name">This Group</tal:block>
          </a>
        </li>
        <li>
          <a tal:attributes="title string:Summary of posts in ${view/groupInfo/name}"
            href="postsSummary.html?l=60">Summary of Posts</a>
        </li>
        <li>
          <a title="Web Feed"  class="alternateATOM"
            type="application/atom+xml"
            tal:attributes="title string:Web Feed of the Latest Posts to ${view/groupInfo/name};
            href view/web_feed_uri"
            href="#">Web feed of the latest posts.</a>
        </li>
      </ul>
      <div class="postList" 
        tal:condition="python:post_count > 0">
        <tal:block repeat="post postList">
          <p tal:define="position repeat/post/number; 
            topicName post/subject;
            showPhoto python:(position==1) or (postList[position-1]['author_id'] != postList[position-2]['author_id']);
            isPublic view/isPublic"
            tal:replace="structure provider:groupserver.Post">
            The email message is rendered by the Post content provider,
            not by this page.
          </p>
        </tal:block>
      </div><!--postList-->
      <p tal:condition="python:not(post_count > 0)">
        There are no posts in this group.
      </p>
      <tal:block tal:define="len view/get_chunk_length">
        <ul class="inline-list navlinks">
          <li>
            <a href="#" tal:condition="laterURL" class="prev"
              tal:attributes="href laterURL;
              title string:The ${len} more recent posts;">Later 
              <span tal:replace="len">-1</span> posts</a>
            <span tal:condition="not:laterURL" class="prev">Later
              <span tal:replace="len">-1</span> posts
            </span>
          </li>
          <li>
            <a href="#" tal:condition="earlierURL" class="next"
              tal:attributes="href earlierURL;
              title string:The ${len} older posts;">Earlier
              <span tal:replace="len">-1</span> posts</a>
            <span tal:condition="not:earlierURL" class="next">Earlier
              <span tal:replace="len">-1</span> posts
            </span>
          </li>
        </ul>
      </tal:block>
    </div><!--hatom-->
    <tal:block metal:fill-slot="javascript">
        <script type="text/javascript"
                src="/++resource++sharebox-20100721.js">&#160;</script>
    </tal:block>
  </body>
</html>

